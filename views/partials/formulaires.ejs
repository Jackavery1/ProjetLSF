<!-- Formulaires d'ajout de contenu -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
  <!-- Formulaire d'ajout de mot -->
  <div class="bg-white rounded-xl shadow-lg p-6">
    <h2 class="text-2xl font-bold text-[#00a8a3] mb-4">Ajouter un mot</h2>
    <form action="/api/dictionnaire" method="POST" class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Mot
        </label>
        <input
          type="text"
          name="mot"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00a8a3] focus:border-transparent outline-none"
          placeholder="Ex: Bonjour"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Catégorie
        </label>
        <select
          name="categorie"
          id="categorie-mot"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00a8a3] focus:border-transparent outline-none"
        >
          <option value="">Sélectionner une catégorie</option>
          <% if (typeof categoriesMots !== 'undefined' && categoriesMots.length > 0) { %>
            <% categoriesMots.forEach(cat => { %>
              <option value="<%= cat %>"><%= cat %></option>
            <% }); %>
          <% } %>
        </select>
        <% if (typeof userRole !== 'undefined' && userRole === 'admin') { %>
        <input
          type="text"
          id="nouvelle-categorie-mot"
          placeholder="Ou créer une nouvelle catégorie"
          class="w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00a8a3] focus:border-transparent outline-none"
        />
        <button
          type="button"
          onclick="ajouterCategorieMot()"
          class="mt-2 text-sm text-[#00a8a3] hover:text-[#00928e]"
        >
          + Ajouter cette catégorie
        </button>
        <% } %>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Définition
        </label>
        <textarea
          name="definition"
          required
          rows="3"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00a8a3] focus:border-transparent outline-none"
          placeholder="Définition du mot"
        ></textarea>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Lien vidéo YouTube
        </label>
        <input
          type="url"
          name="video"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00a8a3] focus:border-transparent outline-none"
          placeholder="https://www.youtube.com/embed/..."
        />
      </div>
      <button
        type="submit"
        class="w-full bg-[#00a8a3] hover:bg-[#00928e] text-white font-semibold py-3 px-4 rounded-lg shadow transition"
      >
        Ajouter le mot
      </button>
    </form>
  </div>

  <!-- Formulaire d'ajout de ressource -->
  <div class="bg-white rounded-xl shadow-lg p-6">
    <h2 class="text-2xl font-bold text-[#00a8a3] mb-4">
      Ajouter une ressource
    </h2>
    <form action="/api/ressources" method="POST" class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Titre
        </label>
        <input
          type="text"
          name="titre"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00a8a3] focus:border-transparent outline-none"
          placeholder="Ex: Dictionnaire LSF"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Catégorie
        </label>
        <select
          name="categorie"
          id="categorie-ressource"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00a8a3] focus:border-transparent outline-none"
        >
          <option value="">Sélectionner une catégorie</option>
          <% if (typeof categoriesRessources !== 'undefined' && categoriesRessources.length > 0) { %>
            <% categoriesRessources.forEach(cat => { %>
              <option value="<%= cat %>"><%= cat %></option>
            <% }); %>
          <% } %>
        </select>
        <% if (typeof userRole !== 'undefined' && userRole === 'admin') { %>
        <input
          type="text"
          id="nouvelle-categorie-ressource"
          placeholder="Ou créer une nouvelle catégorie"
          class="w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00a8a3] focus:border-transparent outline-none"
        />
        <button
          type="button"
          onclick="ajouterCategorieRessource()"
          class="mt-2 text-sm text-[#00a8a3] hover:text-[#00928e]"
        >
          + Ajouter cette catégorie
        </button>
        <% } %>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Description
        </label>
        <textarea
          name="description"
          rows="3"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00a8a3] focus:border-transparent outline-none"
          placeholder="Description de la ressource"
        ></textarea>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Lien
        </label>
        <input
          type="url"
          name="lien"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00a8a3] focus:border-transparent outline-none"
          placeholder="https://..."
        />
      </div>
      <button
        type="submit"
        class="w-full bg-[#00a8a3] hover:bg-[#00928e] text-white font-semibold py-3 px-4 rounded-lg shadow transition"
      >
        Ajouter la ressource
      </button>
    </form>
  </div>
</div>

<script>
  function ajouterCategorieMot() {
    const input = document.getElementById("nouvelle-categorie-mot");
    const select = document.getElementById("categorie-mot");
    const nouvelleCategorie = input.value.trim();

    if (nouvelleCategorie) {
      const option = document.createElement("option");
      option.value = nouvelleCategorie;
      option.textContent = nouvelleCategorie;
      option.selected = true;
      select.appendChild(option);
      input.value = "";
    }
  }

  function ajouterCategorieRessource() {
    const input = document.getElementById("nouvelle-categorie-ressource");
    const select = document.getElementById("categorie-ressource");
    const nouvelleCategorie = input.value.trim();

    if (nouvelleCategorie) {
      const option = document.createElement("option");
      option.value = nouvelleCategorie;
      option.textContent = nouvelleCategorie;
      option.selected = true;
      select.appendChild(option);
      input.value = "";
    }
  }
</script>
