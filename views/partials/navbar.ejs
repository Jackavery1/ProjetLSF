<!-- Barre de navigation -->
<nav class="sticky top-0 z-50 backdrop-blur bg-[#f46b5e]/95 text-white shadow">
  <div class="mx-auto max-w-7xl px-4 py-1">
    <div class="flex h-14 items-center justify-between">
      <!-- Logo / Titre -->
      <h1 class="text-lg md:text-xl font-bold">
        <a href="/" class="hover:text-white/80">Langue des Signes Française</a>
      </h1>

      <!-- Liens Desktop -->
      <ul class="hidden items-center gap-6 text-sm md:flex">
        <li><a href="/" class="hover:opacity-90">Accueil</a></li>
        <li>
          <a href="/dictionnaire" class="hover:opacity-90">Dictionnaire</a>
        </li>
        <li><a href="/quiz" class="hover:opacity-90">Quiz</a></li>
        <li>
          <a href="/ressources" class="hover:opacity-90">Ressources</a>
        </li>
        
        <!-- Navigation conditionnelle selon l'état de connexion -->
        <!-- Vérification : L'utilisateur est-il connecté ? -->
        <% if (typeof userId !== 'undefined' && userId) { %>
          <!-- Si oui, vérifier son rôle -->
          <% if (typeof userRole !== 'undefined' && userRole === 'admin') { %>
            <!-- Si admin : Afficher le lien "Admin" vers le tableau de bord administrateur -->
            <li>
              <a
                href="/admin"
                class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition"
                >Admin</a
              >
            </li>
          <% } else { %>
            <!-- Si utilisateur normal : Afficher le lien "Mon profil" vers la page utilisateur -->
            <li>
              <a
                href="/user"
                class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition"
                >Mon profil</a
              >
            </li>
          <% } %>
          <!-- Bouton de déconnexion (visible pour tous les utilisateurs connectés) -->
          <li>
            <form action="/api/auth/logout" method="POST" class="inline">
              <button
                type="submit"
                class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition"
              >
                Déconnexion
              </button>
            </form>
          </li>
        <% } else { %>
          <!-- Si l'utilisateur n'est pas connecté : Afficher le lien "Connexion" -->
          <li>
            <a
              href="/login"
              class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition"
              >Connexion</a
            >
          </li>
        <% } %>
      </ul>

      <!-- Menu Mobile (details/summary) -->
      <details class="relative md:hidden group">
        <summary
          class="list-none cursor-pointer inline-flex h-9 w-9 items-center justify-center rounded-lg bg-white/15 hover:bg-white/25"
          aria-label="Ouvrir le menu"
        >
          <!-- Icône burger -->
          <svg
            class="h-5 w-5 group-open:hidden"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
          <!-- Icône quand open -->
          <svg
            class="hidden h-5 w-5 group-open:block"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </summary>

        <!-- Dropdown Mobile -->
        <div
          class="absolute right-0 mt-2 w-56 rounded-xl bg-[#f46b5e] shadow-lg ring-1 ring-black/10"
        >
          <ul class="grid gap-1 p-2 text-sm">
            <li>
              <a href="/" class="block rounded px-3 py-2 hover:bg-white/10"
                >Accueil</a
              >
            </li>
            <li>
              <a
                href="/dictionnaire"
                class="block rounded px-3 py-2 hover:bg-white/10"
                >Dictionnaire</a
              >
            </li>
            <li>
              <a href="/quiz" class="block rounded px-3 py-2 hover:bg-white/10"
                >Quiz</a
              >
            </li>
            <li>
              <a
                href="/ressources"
                class="block rounded px-3 py-2 hover:bg-white/10"
                >Ressources</a
              >
            </li>
            
            <!-- Navigation conditionnelle pour le menu mobile (même logique que desktop) -->
            <!-- Vérification : L'utilisateur est-il connecté ? -->
            <% if (typeof userId !== 'undefined' && userId) { %>
              <!-- Si oui, vérifier son rôle -->
              <% if (typeof userRole !== 'undefined' && userRole === 'admin') { %>
                <!-- Si admin : Afficher le lien "Admin" -->
                <li>
                  <a href="/admin" class="block rounded px-3 py-2 hover:bg-white/10"
                    >Admin</a
                  >
                </li>
              <% } else { %>
                <!-- Si utilisateur normal : Afficher le lien "Mon profil" -->
                <li>
                  <a href="/user" class="block rounded px-3 py-2 hover:bg-white/10"
                    >Mon profil</a
                  >
                </li>
              <% } %>
              <!-- Bouton de déconnexion (visible pour tous les utilisateurs connectés) -->
              <li>
                <form action="/api/auth/logout" method="POST" class="inline">
                  <button
                    type="submit"
                    class="w-full text-left block rounded px-3 py-2 hover:bg-white/10"
                  >
                    Déconnexion
                  </button>
                </form>
              </li>
            <% } else { %>
              <!-- Si l'utilisateur n'est pas connecté : Afficher le lien "Connexion" -->
              <li>
                <a href="/login" class="block rounded px-3 py-2 hover:bg-white/10"
                  >Connexion</a
                >
              </li>
            <% } %>
          </ul>
        </div>
      </details>
    </div>
  </div>
</nav>
